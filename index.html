<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>jQuery Table Sort | The Stupid Table Plugin by JoeQuery</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://raw.github.com/joequery/Stupid-Table-Plugin/master/stupidtable.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
    <script>
    $(function(){
      $("#simpleTable").stupidtable();

      // Helper function to convert a string of the form "Mar 15, 1987" into
      // a Date object. 
      var date_from_string = function(str){
          var months = ["jan","feb","mar","apr","may","jun","jul",
          "aug","sep","oct","nov","dec"];
          var pattern = "^([a-zA-Z]{3})\\s*(\\d{2}),\\s*(\\d{4})$";
          var re = new RegExp(pattern);
          var DateParts = re.exec(str).slice(1);

          var Year = DateParts[2];
          var Month = $.inArray(DateParts[0].toLowerCase(), months);
          var Day = DateParts[1];
          return new Date(Year, Month, Day);
      }

      var table = $("#complexTable").stupidtable({
          "date":function(a,b){
              // Get these into date objects for comparison.

              aDate = date_from_string(a);
              bDate = date_from_string(b);

              return aDate - bDate;
          }
      });

        table.bind('aftertablesort', function (event, data) {
          // data.column - the index of the column sorted after a click
          // data.direction - the sorting direction (either asc or desc)

          var th = $(this).find("th");
          th.find(".arrow").remove();
          var arrow = data.direction === "asc" ? "&uarr;" : "&darr;";
          th.eq(data.column).append('<span class="arrow">' + arrow +'</span>');
        });

    });

    </script>
  <body>
    <div class="wrapper">
      <header>
        <h1>Stupid-table-plugin</h1>
<p>A stupidly small and simple jQuery table sorter plugin</p>
        <p class="view"><a href="https://github.com/joequery/Stupid-Table-Plugin">View the Project on GitHub <small>joequery/Stupid-Table-Plugin</small></a></p>
        <ul>
          <li><a href="https://github.com/joequery/Stupid-Table-Plugin/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/joequery/Stupid-Table-Plugin/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/joequery/Stupid-Table-Plugin">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>Stupid jQuery Table Sort</h1>

        <p>This is a stupidly simple, <a href="https://raw.github.com/joequery/Stupid-Table-Plugin/master/stupidtable.min.js">absurdly lightweight</a> jQuery table sorting plugin.
As long as you understand basic
<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort">JavaScript sorting</a>, you can make this plugin do as much
or as little as you want.</p>

<p>Here's an example. Click a header to sort the table by that column.</p>

<table id="simpleTable">
  <thead>
    <tr>
    <th data-sort="int">int</th>
    <th data-sort="float">float</th>
    <th data-sort="string">string</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>15</td>
      <td>-.18</td>
      <td>banana</td>
    </tr>
      <tr>
      <td>95</td>
      <td>36</td>
      <td>coke</td>
    </tr>
      <tr>
      <td>2</td>
      <td>-152.5</td>
      <td>apple</td>
    </tr>
    <tr>
      <td>-53</td>
      <td>88.5</td>
      <td>zebra</td>
    </tr>
    <tr>
      <td>195</td>
      <td>-858</td>
      <td>orange</td>
    </tr>
  </tbody>
</table>

This is achieved with the following JS

<code><pre>
  $("#simpleTable").stupidtable();
</pre></code>

And the following HTML
<code><pre>
&lt;table id="simpleTable"&gt;
    &lt;thead&gt;
        &lt;tr&gt;
        &lt;th data-sort="int"&gt;int&lt;/th&gt;
        &lt;th data-sort="float"&gt;float&lt;/th&gt;
        &lt;th data-sort="string"&gt;string&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
  ...
  ... (rest of the table)
</pre></code>

<p>The full source for the example can be located <a href="https://github.com/joequery/Stupid-Table-Plugin/blob/master/example.html">in the repo</a>.

<p>A slightly more complex example for fun.</p>

 <table id="complexTable">
      <thead>
        <tr>
          <th data-sort="int" class="awesome">int</th>
          <th data-sort="float">float</th>
          <th data-sort="string">string</th>
          <th>Can't sort me!</th>
          <th data-sort="date">date</th>
          <th data-sort="int">Letter frequency</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>15</td> <td>-.18</td> <td>banana</td> <td>arbitrary</td>
          <td>Mar 15, 1986</td><td data-sort-value="2">T</td>
        </tr>
        <tr class="awesome">
          <td>95</td> <td>36</td> <td></td> <td>pointless</td>
          <td>Feb 27, 2086</td> <td data-sort-value="1">E</td>
        </tr>
        <tr>
          <td>2</td> <td>-152.5</td> <td></td> <td>silly</td>
          <td>Aug 07, 2004</td><td data-sort-value="3">A</td>
        </tr>
        <tr>
          <td>-53</td> <td>88.5</td> <td>hello</td> <td>eccentric</td>
          <td>Sep 15, 2002</td><td data-sort-value="5">I</td>

        </tr>
        <tr>
          <td>195</td> <td>-858</td> <td>orange</td> <td>garbage</td>
          <td>Mar 15, 1986</td><td data-sort-value="4">O</td>
        </tr>
      </tbody>

    </table>

<p>Most table sorting plugins try to account for a limitless number of data
types and their limitless ways of being presented. This leads to an extremely
bloated code base with only a tiny portion of the code ever used by your
project. <p>

<p>This plugin avoids that issue by letting you define your own ways of sorting
table columns. The plugin internally recognizes "int", "string", and "float",
so simple data tables will take very little effort on your part. 
See the <a href="https://github.com/joequery/Stupid-Table-Plugin#readme">README</a>
for more details. </p>

<p>Here's how we created a custom data type to sort dates in the format seen in
the example above.</p>

<code><pre>
var date_from_string = function(str){
    var months = ["jan","feb","mar","apr","may","jun","jul",
    "aug","sep","oct","nov","dec"];
    var pattern = "^([a-zA-Z]{3})\\s*(\\d{2}),\\s*(\\d{4})$";
    var re = new RegExp(pattern);
    var DateParts = re.exec(str).slice(1);

    var Year = DateParts[2];
    var Month = $.inArray(DateParts[0].toLowerCase(), months);
    var Day = DateParts[1];
    return new Date(Year, Month, Day);
}

var table = $("#complexTable").stupidtable({
    "date":function(a,b){
        // Get these into date objects for comparison.
        aDate = date_from_string(a);
        bDate = date_from_string(b);

        return aDate - bDate;
    }
});
</pre></code>

And the following HTML
<code><pre>
&lt;table id="complexTable"&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th data-sort="int" class="awesome"&gt;int&lt;/th&gt;
      &lt;th data-sort="float"&gt;float&lt;/th&gt;
      &lt;th data-sort="string"&gt;string&lt;/th&gt;
      &lt;th&gt;Can't sort me!&lt;/th&gt;
      &lt;th data-sort="date"&gt;date&lt;/th&gt;
      &lt;th data-sort="int"&gt;Letter frequency&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  ...
  ... (rest of the table)
</pre></code>

<p>The source for this example can also be found <a href="https://github.com/joequery/Stupid-Table-Plugin/blob/master/complex_example.html">in the repo</a>.

<p>Sometimes data is too complex to just call <code>Array.sort</code> on. 
Creating a data type, while seemingly daunting from the example, serves
as an effective way to let you have complete control over how you want your
data to be sorted.</p>

<h2>Callbacks</h2>

<p>The complex table above uses a custom callback to add an arrow to the table
headers after the table is sorted. To execute a callback after the table is
sorted, bind on the 'aftertablesort' event. Here's how the arrow effect was
achieved:

<code><pre>
var table = $("#complexTable").stupidtable({
    // Sort functions here
});

table.bind('aftertablesort', function (event, data) {
    // data.column - the index of the column sorted after a click
    // data.direction - the sorting direction (either asc or desc)

    var th = $(this).find("th");
    th.find(".arrow").remove();
    var arrow = data.direction === "asc" ? "&uarr;" : "&darr;";
    th.eq(data.column).append('&lt;span class="arrow"&gt;' + arrow +'&lt;/span&gt;');
});
</pre></code>

<p>Similarly, you can also bind on 'beforetablesort' to execute a callback 
before the sort actually takes place when a column is clicked.</p>

<p>Refer to <a href="https://github.com/joequery/Stupid-Table-Plugin/blob/master/complex_example.html">complex_example.html</a> 
in the repo.</p>

<h2>data-sort-value</h2>
<p>
If you have data in both a machine friendly form and human friendly form, you
can provide the machine friendly value to <code>data-sort-value</code> 
on table cells. The plugin will sort by the value provided but display the
human friendly form to the user.  For example, consider a to-do list table with
a "Due Date" column.  You can have nice, human friendly due dates such as "A
week from today" if you specify a data-sort-value attribute of a timestamp.

<code><pre>
&lt;th data-sort="int"&gt;Due Date&lt;/th&gt;
...
...
&lt;td data-sort-value="1335798463"&gt;A week from today&lt;/td&gt;
</pre></code>


</p>

      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/joequery">joequery</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
    <!-- Start of StatCounter Code -->
    <script type="text/javascript">
    var sc_project=6297856; 
    var sc_invisible=1; 
    var sc_security="f601122c"; 
    </script>
    <script type="text/javascript"
    src="http://www.statcounter.com/counter/counter.js"></script>
    <noscript><div class="statcounter">
    <img class="statcounter"
    src="http://c.statcounter.com/6297856/0/f601122c/1/"
    alt=""></noscript>
    <!-- End of StatCounter Code -->
    
  </body>
</html>
