(function(g){g.fn.stupidtable=function(i){return this.each(function(){var j=g(this);i=i||{};i=g.extend({},{"int":function(d,b){return parseInt(d,10)-parseInt(b,10)},"float":function(d,b){return parseFloat(d)-parseFloat(b)},string:function(d,b){return d<b?-1:d>b?1:0}},i);j.on("click","th",function(){var d=j.children("tbody").children("tr"),b=g(this),k=b.index(),f=b.data("sort")||null;if(f){var e=i[f];column=[];d.each(function(c,b){var a=g(b).children().eq(k),a=a.data("sort-value")||a.text();column.push(a)});
f="asc"===b.data("sort-dir")?"desc":"asc";b.siblings("th").data("sort-dir",null);var a=column,c=a.slice(0),h=a.slice(0).reverse(),a=a.slice(0).sort(e);if(c&&a&&!(c<a||a<c)||h&&a&&!(h<a||a<h)){column.reverse();e=[];for(c=column.length-1;0<=c;c--)e.push(c)}else{f=column;e=f.slice(0).sort(e);c=[];for(a=h=0;a<f.length;a++){for(h=g.inArray(f[a],e);-1!=g.inArray(h,c);)h++;c.push(h)}e=c;f="asc"}b.data("sort-dir",f);b=e;e=d.slice(0);for(c=0;c<b.length;c++)newIndex=b[c],e[newIndex]=d[c];d=g(e);j.children("tbody").append(d);
j.trigger("aftertablesort",{column:k,direction:f})}})})}})(jQuery);