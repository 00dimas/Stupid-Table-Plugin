(function(e){e.fn.stupidtable=function(t){return this.each(function(){var n=e(this);t=t||{};t=e.extend({},e.fn.stupidtable.default_sort_fns,t);n.on("click.stupidtable","th",function(){var r=n.children("tbody").children("tr");var i=e(this);var s=0;var o=e.fn.stupidtable.dir;n.find("th").slice(0,i.index()).each(function(){var t=e(this).attr("colspan")||1;s+=parseInt(t,10)});var u=i.data("sort-default")||o.ASC;if(i.data("sort-dir"))u=i.data("sort-dir")===o.ASC?o.DESC:o.ASC;var a=i.data("sort")||null;if(a===null){return}n.trigger("beforetablesort",{column:s,direction:u});n.css("display");setTimeout(function(){var f=[];var l=t[a];r.each(function(t,n){var r=e(n).children().eq(s);var i=r.data("sort-value");var o=typeof i!=="undefined"?i:r.text();f.push([o,n])});f.sort(function(e,t){return l(e[0],t[0])});if(u!=o.ASC)f.reverse();r=e.map(f,function(e){return e[1]});n.children("tbody").append(r);n.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");i.data("sort-dir",u).addClass("sorting-"+u);n.trigger("aftertablesort",{column:s,direction:u});n.css("display")},10)})})};e.fn.stupidtable.dir={ASC:"asc",DESC:"desc"};e.fn.stupidtable.default_sort_fns={"int":function(e,t){return parseInt(e,10)-parseInt(t,10)},"float":function(e,t){return parseFloat(e)-parseFloat(t)},string:function(e,t){if(e<t)return-1;if(e>t)return+1;return 0},"string-ins":function(e,t){e=e.toLowerCase();t=t.toLowerCase();if(e<t)return-1;if(e>t)return+1;return 0}}})(jQuery)